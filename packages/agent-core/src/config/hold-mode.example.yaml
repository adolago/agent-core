# Hold Mode Configuration
# 
# This file controls what commands and tools are allowed/blocked in HOLD and RELEASE modes.
# 
# Location options:
#   - User-level:    ~/.config/agent-core/hold-mode.yaml
#   - Project-level: .agent-core/hold-mode.yaml (in project root)
#
# Project config overrides user config. Both are merged.

# Profile: strict | normal | permissive
# 
# - strict: Blocks interpreters (python, node), network tools (curl, wget, ssh),
#           scheduled tasks (crontab, at), and container/cloud CLIs (docker, kubectl, aws)
# - normal: Default blocklist (file ops, process control, system state)
# - permissive: Allows touch and mkdir in HOLD mode
profile: normal

# Commands blocked in BOTH hold and release modes (safety net)
# Patterns support wildcards: "rm -rf *" matches any rm -rf command
always_block:
  - "rm -rf /"
  - "rm -rf /*"
  - "shutdown"
  - "reboot"
  - ":(){ :|:& };:"  # fork bomb

# Commands allowed even in HOLD mode (exceptions)
# Use for build/test commands that need to write temporary files
hold_allow:
  - "docker build"
  - "docker compose"
  - "npm test"
  - "npm run build"
  - "bun test"
  - "bun run build"
  - "cargo test"
  - "cargo build"
  - "go test"
  - "go build"
  - "make"
  - "make test"

# Commands that require extra confirmation in RELEASE mode
# For destructive operations you want to double-check
release_confirm:
  - "git push"
  - "git push --force"
  - "kubectl delete"
  - "docker rm"
  - "docker rmi"

# Tool-specific overrides for HOLD mode
# Set to true to allow the tool even in HOLD mode
tools:
  edit: false
  write: false
  apply_patch: false
  todowrite: false
