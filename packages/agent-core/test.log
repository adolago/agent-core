bun test v1.2.14 (6a363a38)

test/server/agent-route.test.ts:
 9 | describe("app.agents endpoint", () => {
10 |   test("returns agents with instance context from request", async () => {
11 |     const app = Server.App()
12 |     const response = await app.request(`/agent?directory=${encodeURIComponent(projectRoot)}`)
13 |
14 |     expect(response.status).toBe(200)
                                 ^
error: expect(received).toBe(expected)

Expected: 200
Received: 500

      at <anonymous> (/app/packages/agent-core/test/server/agent-route.test.ts:14:29)
(fail) app.agents endpoint > returns agents with instance context from request [717.67ms]
----------------------------------------------------------------------------------------|---------|---------|-------------------
File                                                                                    | % Funcs | % Lines | Uncovered Line #s
----------------------------------------------------------------------------------------|---------|---------|-------------------
All files                                                                               |   23.69 |   41.65 |
 src/agent/agent.ts                                                                     |   37.50 |   20.62 | 66-255,259,273-286,290-342
 src/auth/index.ts                                                                      |   30.77 |   35.29 | 59-60,68-71,78-81,85-89,98-99,106-107,114-159,167-188,195-217
 src/bun/index.ts                                                                       |   80.00 |   44.00 | 47,64-132
 src/bus/bus-event.ts                                                                   |   66.67 |   39.39 | 21-40
 src/bus/global.ts                                                                      |  100.00 |  100.00 |
 src/bus/index.ts                                                                       |   12.50 |   24.42 | 19-23,26-36,41-62,66-69,73-81,85,89-101
 src/cli/cmd/tui/event.ts                                                               |  100.00 |  100.00 |
 src/cli/cmd/tui/util/dictation.ts                                                      |    5.88 |    3.88 | 63-103,107-206,210-238,242-302,306-360,364-379,383-397,401-429,433-448,453-463,467-489,493-559,563-568,572-577,581-599,603-604
 src/command/index.ts                                                                   |   20.00 |   36.67 | 45-51,60-126,130
 src/config/config.ts                                                                   |   54.00 |   75.48 | 31,34,46-54,56-62,70-71,78,84-85,87-93,107-111,133-134,147,158,161-168,170-178,180,183-194,196,198,200,202-204,222,228,233-237,241-242,255-261,263-264,266-268,270-280,295-301,303-304,306-308,310-314,316-327,341-347,349-350,352-364,379,394-401,416-432,505-508,512-520,661,663-666,1314-1315,1317-1319,1460-1465,1482,1496-1497,1499-1522,1524-1525,1527-1528,1534-1544,1546-1547,1549-1552,1557-1558,1560-1561,1563-1572,1574-1576,1614-1625,1629,1633-1673,1677-1716
 src/config/hold-mode.ts                                                                |    5.56 |   17.94 | 46,50,54,58-65,73-79,83-120,124-194,198,202,206,210,214-223,240-265,280-325,329-366,370-375,379-400
 src/config/markdown.ts                                                                 |   20.00 |   20.99 | 9,13,17-64,68-81
 src/env/index.ts                                                                       |   16.67 |   46.67 | 4,8-9,13,17-18,22-23
 src/file/ignore.ts                                                                     |   66.67 |   69.57 | 60-80
 src/file/index.ts                                                                      |   12.50 |   20.63 | 76-109,122-197,201,205-271,275-317,321-366,370-406
 src/file/ripgrep.ts                                                                    |   16.67 |   28.06 | 125-197,201-202,206-266,271-371,375-419
 src/file/time.ts                                                                       |   16.67 |   18.37 | 10-19,23-26,30,34-50,55-62
 src/file/watcher.ts                                                                    |   20.00 |   28.18 | 35-38,43-111,114-115,120-123
 src/flag/flag.ts                                                                       |   75.00 |   91.18 | 12-13
 src/format/formatter.ts                                                                |    0.00 |   61.81 | 18-19,27-28,66-76,87-97,135-143,151-152,160-162,170-171,179-195,203-221,230-237,245-246,254-255,263-264,272-273,281-284,292-293,301-302,310-311,319-320,328-329,337-338
 src/format/index.ts                                                                    |   16.67 |   20.49 | 26-62,66-72,76-85,89-99,103-134
 src/global/index.ts                                                                    |   73.68 |   63.33 | 8-16,20-34,57-59,81-83,115,118-119
 src/hooks/lifecycle.ts                                                                 |   20.00 |   34.81 | 171-185,193-203,213-217,221-228,232-242,256-282,286-305,309-334,338-350,354-361,369-409,414-436,441-462,470-481,489-508,515-516
 src/id/id.ts                                                                           |   25.00 |   38.10 | 26,30,34-41,45-51,55-72,77-80
 src/installation/index.ts                                                              |   22.22 |   22.44 | 21-46,50-58,63-70,101-104,108,131-133,137,141-145,149-154,159-223,234-238,242-289,308-324,328-364
 src/lsp/client.ts                                                                      |   50.00 |   12.35 | 42-261
 src/lsp/index.ts                                                                       |   12.00 |   26.84 | 16-19,70-74,79-137,140,145,161-172,176-259,263-272,276-286,290-298,302-317,361-372,376-390,394-404,408-419,423-433,437-447,451-468,472-489,493-495,499-501,506-517
 src/lsp/language.ts                                                                    |  100.00 |  100.00 |
 src/lsp/server.ts                                                                      |    4.26 |   12.94 | 15-18,29-47,62-70,73-83,94-112,120-160,168-217,233-288,322-350,357-359,362-391,399-431,447-491,499-544,552-605,613-716,724-755,763-794,802-828,835-861,864-874,882-1019,1027-1058,1066-1108,1116-1208,1216-1298,1306-1345,1361-1484,1492-1527,1535-1545,1553-1563,1571-1581,1588-1618,1626-1707,1715-1796,1804-1834,1842-1852,1860-1873,1881-1904,1912-1997,2005-2015
 src/mcp/auth.ts                                                                        |    7.14 |   40.86 | 34-35,43-52,56-57,61-68,72-76,80-82,86-88,92-94,98-102,106-108,112-113,117-121,129-132
 src/mcp/index.ts                                                                       |    2.94 |    3.27 | 35-953,958-982,986-1009,1017-1085,1094-1156,1163-1199,1207-1211,1218-1222,1229-1230,1239-1242
 src/mcp/oauth-callback.ts                                                              |   12.50 |    8.23 | 26-41,57-148,152-157,161-179,183-193
 src/mcp/oauth-provider.ts                                                              |    0.00 |    6.15 | 27-148
 src/patch/index.ts                                                                     |   20.00 |    7.01 | 75-104,108-158,162-177,181-186,190-244,249-301,311-342,346-398,402-417,422-427,433-460,464-486,490-513,518-570,575-576,581-676
 src/paths.ts                                                                           |    0.00 |   35.78 | 12-20,31-48,56,60,64,68,72,81,85,93-111,118-121,125,134,138,147,155,159,168,172,181,185,189,193
 src/permission/arity.ts                                                                |   50.00 |   95.24 | 1-8
 src/permission/next.ts                                                                 |    7.14 |    0.72 | 1-273
 src/pkg/sdk/client.ts                                                                  |    0.00 |   16.00 | 8-28
 src/pkg/sdk/gen/client.gen.ts                                                          |  100.00 |  100.00 |
 src/pkg/sdk/gen/client/client.gen.ts                                                   |   25.00 |   15.93 | 25-26,32-62,66-177,183-190
 src/pkg/sdk/gen/client/index.ts                                                        |  100.00 |  100.00 |
 src/pkg/sdk/gen/client/utils.gen.ts                                                    |   35.29 |   34.84 | 11-50,59-87,91-102,106-140,144-152,209,213-216,220-221,225-228,232-237,242-243
 src/pkg/sdk/gen/core/auth.gen.ts                                                       |    0.00 |    5.26 | 22-39
 src/pkg/sdk/gen/core/bodySerializer.gen.ts                                             |    0.00 |   22.00 | 15-20,25-28,34-47,53,58-71
 src/pkg/sdk/gen/core/params.gen.ts                                                     |    0.00 |   11.11 | 50-67,78-82,86-142
 src/pkg/sdk/gen/core/pathSerializer.gen.ts                                             |    0.00 |    4.76 | 28-36,41-49,54-62,67-105,109-119,123-165
 src/pkg/sdk/gen/core/serverSentEvents.gen.ts                                           |    0.00 |    0.69 | 66-208
 src/pkg/sdk/gen/core/utils.gen.ts                                                      |    0.00 |    4.40 | 18-79,83-107
 src/pkg/sdk/gen/sdk.gen.ts                                                             |    0.00 |   25.90 | 223,226-228,237-240,249-252,259-262,271-274,281-288,295-298,305-308,315-322,329-332,341-344,351-358,365-368,377-380,387-390,399-402,411-414,423-426,435-438,445-452,459-462,469-472,479-482,489-496,503-506,513-516,523-530,537-544,551-554,561-564,571-574,581-584,591-598,605-608,615-622,629-632,639-646,653-660,667-674,681-688,695-698,707-710,719-730,737-748,757-760,767-770,780-783,790-793,800-803,812-815,822-825,832-835,844-851,858-861,870-873,880-883,890-897,904-909,916-923,932-935,942-949,956-959,966-969,980-983,992-995,1004-1007,1014-1021,1030-1037,1044-1047,1054-1057,1064-1067,1074-1077,1084-1087,1094-1097,1104-1111,1118-1125,1132-1139,1149-1152,1161-1174
 src/pkg/sdk/gen/types.gen.ts                                                           |  100.00 |  100.00 |
 src/pkg/util/error.ts                                                                  |   57.14 |   90.00 | 1-2,29
 src/pkg/util/fn.ts                                                                     |   66.67 |  100.00 |
 src/pkg/util/lazy.ts                                                                   |   50.00 |   37.50 | 5-9
 src/pkg/util/slug.ts                                                                   |   50.00 |   94.29 | 68-71
 src/plugin/codex.ts                                                                    |    0.00 |    4.26 | 18-23,27-31,35-37,41,54-59,64-67,72-81,85-97,108-122,126-138,184-226,242-309,313-317,321-344,348-491
 src/plugin/index.ts                                                                    |   20.00 |   15.38 | 21-90,94-107,111,115-128
 src/plugin/kimi.ts                                                                     |    0.00 |    4.83 | 23-36,40-53,57-68,76-117,122-295
 src/process/registry.ts                                                                |   28.57 |   17.48 | 66-106,113-125,132-149,156-184,191,198-218,225,232,239-268,275-278,288,309-330,337-346,353-362
 src/process/types.ts                                                                   |  100.00 |  100.00 |
 src/project/instance.ts                                                                |   85.71 |   86.67 | 46-48,56-60,83-84
 src/project/project.ts                                                                 |   57.58 |   65.86 | 67-72,77-86,88-89,91-98,100-105,109-114,126-131,144,149-154,163,165-169,250-251,253,255-263,265,270-272,276-281,314-321,325-336
 src/project/state.ts                                                                   |   66.67 |   77.36 | 36,50-55,63-65,67
 src/project/vcs.ts                                                                     |   16.67 |   50.00 | 31-37,42-61,64,69
 src/provider/auth.ts                                                                   |   16.67 |   39.20 | 19-25,39-47,68-87,99-158,169-179
 src/provider/circuit-breaker.ts                                                        |   36.84 |   26.47 | 84-85,92,99-109,118-138,145-175,182-214,221-226,233-261,268,275-281,288-291,308-311
 src/provider/constants.ts                                                              |  100.00 |  100.00 |
 src/provider/equivalence.ts                                                            |   16.67 |   22.40 | 55-60,74,82-86,94-102,112-133,143-149,161-250,257-261,268-270
 src/provider/fallback-chain.ts                                                         |   16.67 |   15.83 | 86-190,197-204,217-286,293-300,307-317
 src/provider/fallback.ts                                                               |   11.11 |   13.88 | 82-126,133-199,209-362,369-370,377-378,385,392
 src/provider/models.ts                                                                 |   25.00 |   84.34 | 12,82-93
 src/provider/provider.ts                                                               |    4.55 |   16.41 | 76-83,87-91,118-141,146-155,158-164,167-174,265-333,337-344,348-885,889,893,897-993,998,1002-1018,1022-1044,1049-1060,1064-1099,1104-1109,1113-1125,1129-1133,1153-1190
 src/provider/sdk/openai-compatible/src/index.ts                                        |  100.00 |  100.00 |
 src/provider/sdk/openai-compatible/src/openai-compatible-provider.ts                   |   16.67 |   61.11 | 56,68-73,77-82
 src/provider/sdk/openai-compatible/src/responses/convert-to-openai-responses-input.ts  |    0.00 |    3.50 | 16-17,21-294
 src/provider/sdk/openai-compatible/src/responses/map-openai-responses-finish-reason.ts |    0.00 |    0.00 | 3-30
 src/provider/sdk/openai-compatible/src/responses/openai-error.ts                       |    0.00 |  100.00 |
 src/provider/sdk/openai-compatible/src/responses/openai-responses-language-model.ts    |    0.00 |   19.29 | 15-17,146-147,154-1451,1673-1675,1679-1681,1685-1689,1693-1695,1699-1701,1705-1707,1710-1712,1716-1718,1722-1724,1728-1730,1734-1738,1742-1744,1748-1750,1754-1756,1760,1772-1823
 src/provider/sdk/openai-compatible/src/responses/openai-responses-prepare-tools.ts     |    0.00 |    3.53 | 13-176
 src/provider/sdk/openai-compatible/src/responses/tool/code-interpreter.ts              |    0.00 |   91.67 | 83-85
 src/provider/sdk/openai-compatible/src/responses/tool/file-search.ts                   |    0.00 |  100.00 |
 src/provider/sdk/openai-compatible/src/responses/tool/image-generation.ts              |    0.00 |   91.18 | 110-112
 src/provider/sdk/openai-compatible/src/responses/tool/local-shell.ts                   |  100.00 |  100.00 |
 src/provider/sdk/openai-compatible/src/responses/tool/web-search-preview.ts            |  100.00 |  100.00 |
 src/provider/sdk/openai-compatible/src/responses/tool/web-search.ts                    |    0.00 |   93.48 | 98-100
 src/provider/transform.ts                                                              |    4.55 |   11.85 | 17,23-27,31,37-51,57-67,71-149,153-186,190-224,230-270,274-285,289-298,302-308,315-520,524-604,608-627,808-837,845-857,861-868,872-914,918-978
 src/pty/index.ts                                                                       |    8.33 |    4.60 | 15-242
 src/question/index.ts                                                                  |   14.29 |   52.05 | 82-93,97-119,123-139,143-158,163
 src/scheduler.ts                                                                       |   33.33 |   21.88 | 25-28,40,45-62,66-92
 src/server/auth.ts                                                                     |   33.33 |   27.08 | 19-22,26-30,34-39,46-54,56-60,63-68
 src/server/error.ts                                                                    |  100.00 |  100.00 |
 src/server/mdns.ts                                                                     |   33.33 |   12.12 | 31-77,82-92
 src/server/route/app.ts                                                                |   40.00 |   54.29 | 445-489,523-541
 src/server/route/auth.ts                                                               |    0.00 |   67.35 | 44-71,99-102
 src/server/route/command.ts                                                            |    0.00 |   70.45 | 32-44
 src/server/route/config.ts                                                             |    0.00 |   66.84 | 25,48-50,81-133,159-160,193-195
 src/server/route/filesystem.ts                                                         |    0.00 |   84.66 | 34-40,70-80,107-108,135-137,164-166
 src/server/route/gateway.ts                                                            |    0.00 |   27.81 | 52-57,61-71,75-99,103-229,233-244,282-309,347-381
 src/server/route/global.ts                                                             |    0.00 |   56.74 | 54-55,76-101,118-164,185-186
 src/server/route/instance.ts                                                           |    0.00 |   86.36 | 29-30,63-69,92-94,115-116,137-140
 src/server/route/lsp.ts                                                                |    0.00 |   95.35 | 24
 src/server/route/mcp.ts                                                                |    0.00 |   85.02 | 26,56-59,88-90,117-126,156-159,182-191,214-216,237-239,260-262,284-286,307-308,329-330
 src/server/route/memory.ts                                                             |    0.00 |   72.58 | 97-103,133-141,168-182,209-217,243-249,279-289,316-328,362-370,397-405,439-447,473-480,511-526
 src/server/route/model.ts                                                              |    0.00 |   68.22 | 17-24,51-56,83-132,153,188,222-228,264-272
 src/server/route/permission.ts                                                         |    0.00 |   81.82 | 28-35,56-57
 src/server/route/process.ts                                                            |    0.00 |   69.28 | 47-50,83-86,118-120,139-184,209-212,242-245,271-279,305-313,340-349,375-383
 src/server/route/project.ts                                                            |    0.00 |   90.28 | 27-28,49,73-76
 src/server/route/pty.ts                                                                |    0.00 |   89.83 | 27,50-51,74-78,102-103,125-126
 src/server/route/question.ts                                                           |    0.00 |   86.36 | 26-27,56-62,90-92
 src/server/route/session.ts                                                            |    0.00 |   64.37 | 25-26,30-32,36-37,71-81,104-106,140-153,175-176,205-208,247-257,285-306,335-344,373-375,421-445,482-508,531-533,558-561,584-587,610-611,634-640,676-677,708-731,755-760,788-793,815-821,844-854,874-882,911-914,938-941,965-971,994-996,1021-1026,1050-1052,1075-1077,1097-1191,1223-1246,1264-1334
 src/server/route/stt.ts                                                                |    0.00 |   58.33 | 55-89
 src/server/route/tool.ts                                                               |    0.00 |   85.71 | 28,70-79
 src/server/route/tui.ts                                                                |    8.33 |   81.79 | 29-30,51-52,73-76,97-100,121-124,145-148,169-172,195-212,234-235,272-274,297-300
 src/server/server.ts                                                                   |   65.00 |   56.84 | 55-66,78,92,104,106-109,141-146,154-155,159-160,223,230-263,268-279,291-300,304-340
 src/server/state.ts                                                                    |   50.00 |   77.78 | 5
 src/session/compaction.ts                                                              |   20.00 |   19.91 | 30-37,49-88,92-199,213-229
 src/session/index.ts                                                                   |    4.35 |    2.45 | 1-430,436,448-454
 src/session/instruction.ts                                                             |   14.29 |   15.58 | 34-91,99-100,107-109,116-117
 src/session/llm.ts                                                                     |   14.29 |    6.32 | 34-42,48-81,85-86,105-384,388-396,402-408
 src/session/message-v2.ts                                                              |   14.29 |   60.97 | 438-570,574-580,584-590,599-602,607-620,624-707
 src/session/persistence.ts                                                             |    3.13 |   10.26 | 86-95,104-113,119-121,129-169,173-208,216-249,253-263,267-272,276-289,293-317,321-344,353-404,408-426,431-443,452-477,481-498,508-533,537-542,546-550,555,574-576,580-584,592-597,604-640,647-655,669-713,731-749,756-770,794-813,821-826,834-839
 src/session/processor.ts                                                               |   50.00 |    3.64 | 27-662
 src/session/prompt.ts                                                                  |    3.57 |    9.22 | 61-71,74-79,86-94,99-103,107-114,118-126,133-155,159-162,166-220,224-225,296-325,329-376,380-387,391-404,411-452,456-465,470-474,478-899,903-920,924-927,931-1119,1123-1493,1497-1544,1560-1775,1806-1853,1862-2008,2012-2080
 src/session/retry.ts                                                                   |   25.00 |    4.55 | 5-60,64-91
 src/session/revert.ts                                                                  |   25.00 |   20.41 | 22-63,67-75,79-105
 src/session/status.ts                                                                  |   20.00 |   77.53 | 81-82,86-89,94,98-110
 src/session/stream-events.ts                                                           |  100.00 |  100.00 |
 src/session/stream-health.ts                                                           |    3.57 |   12.42 | 32,39,162-192,220-249,259-324,332-492,499-530,537-555,562-590,597-606,614-617,625-627,635-637,644,651,658,662-665,669-672,689-695,702,709-714,721-726,733-736,743-747
 src/session/summary.ts                                                                 |   16.67 |   22.90 | 28-32,37-60,64-109,118,123-147
 src/session/system.ts                                                                  |   16.67 |   22.88 | 21-22,26,30-35,39-62,73,76-132
 src/session/thread.ts                                                                  |   11.11 |   14.75 | 68-116,123-147,155,162-169,176-180,187-209,220-248,255-270
 src/session/todo.ts                                                                    |   25.00 |   67.31 | 31-36,50-51,55-63
 src/shell/shell.ts                                                                     |   20.00 |   19.64 | 9-32,38-52,56-58,62-64
 src/skill/index.ts                                                                     |  100.00 |  100.00 |
 src/skill/skill.ts                                                                     |   20.00 |   29.41 | 26-27,52-131,135,144-156
 src/snapshot/index.ts                                                                  |   10.00 |   15.74 | 13-46,50-74,84-107,111-126,130-158,162-180,196-228,232-233
 src/storage/storage.ts                                                                 |   78.79 |   40.50 | 28-35,37-57,59-61,63-74,76-99,101-118,126-139,161-165,206-207,212-223
 src/tool/apply_patch.ts                                                                |    0.00 |    8.03 | 23-274
 src/tool/bash.ts                                                                       |    0.00 |    6.55 | 31-44,48-51,55-72,78-369
 src/tool/batch.ts                                                                      |    0.00 |    3.49 | 8-173
 src/tool/codesearch.ts                                                                 |    0.00 |   25.71 | 51-128
 src/tool/edit.ts                                                                       |    0.00 |    6.07 | 23,34-150,164-178,182,186-222,226-357,361-401,405-429,433-478,482-492,496-518,522-576,580-612,616-651
 src/tool/external-directory.ts                                                         |    0.00 |    9.52 | 12-30
 src/tool/glob.ts                                                                       |    0.00 |   25.33 | 19-74
 src/tool/grep.ts                                                                       |    0.00 |   10.67 | 18-151
 src/tool/invalid.ts                                                                    |    0.00 |   60.00 | 9-14
 src/tool/ls.ts                                                                         |    0.00 |   34.48 | 42-117
 src/tool/lsp.ts                                                                        |    0.00 |   31.18 | 30-93
 src/tool/plan.ts                                                                       |    0.00 |   15.87 | 13-16,22-71,78-129
 src/tool/question.ts                                                                   |    0.00 |   32.26 | 10-30
 src/tool/read.ts                                                                       |    0.00 |    9.68 | 33-66,76-211,216-269
 src/tool/registry.ts                                                                   |   14.29 |   23.29 | 34-59,63-78,82-88,92-116,120,124-160
 src/tool/skill.ts                                                                      |    0.00 |   13.33 | 12-76
 src/tool/task.ts                                                                       |    0.00 |    9.72 | 23-89,105-297
 src/tool/todo.ts                                                                       |    0.00 |   25.00 | 11-39,46-61
 src/tool/tool.ts                                                                       |   66.67 |   26.19 | 55-85
 src/tool/truncation.ts                                                                 |   20.00 |    7.84 | 10-103
 src/tool/webfetch.ts                                                                   |    0.00 |   10.11 | 19-140,146-174,178-186
 src/tool/websearch.ts                                                                  |    0.00 |    9.38 | 40-155
 src/tool/write.ts                                                                      |    0.00 |   27.06 | 24-85
 src/usage/pricing.ts                                                                   |    0.00 |   12.16 | 21-31,38-59,67-90,97,104-107,114-116
 src/usage/route.ts                                                                     |    0.00 |    6.86 | 16-38,47-60,69-88,97-115,124-135,144-160,169-210,219-234
 src/usage/storage.ts                                                                   |    0.00 |    3.80 | 34-76,83-87,94-97,104-142,149-191,198-318,325-355,362-453,460-463,470-472,480-502,506-527
 src/usage/tracker.ts                                                                   |    0.00 |   15.38 | 29-34,41-46,54-105,113-146
 src/util/archive.ts                                                                    |   50.00 |   33.33 | 5-12
 src/util/context.ts                                                                    |   66.67 |    9.09 | 1-20
 src/util/defer.ts                                                                      |    0.00 |    0.00 | 1-10
 src/util/filesystem.ts                                                                 |   60.00 |   42.50 | 25-34,42-49,58-63,67-71,75-77,97-108,129-153
 src/util/fn.ts                                                                         |   33.33 |   71.43 | 4-5
 src/util/iife.ts                                                                       |  100.00 |  100.00 |
 src/util/lazy.ts                                                                       |  100.00 |  100.00 |
 src/util/lock.ts                                                                       |   84.62 |   68.66 | 30-32,37-38,59-66,85-92
 src/util/log.ts                                                                        |   70.37 |   87.40 | 60,63-64,96,115,138-140,158-160,163-164,167,181-182
 src/util/net.ts                                                                        |    0.00 |    5.94 | 20-44,56-74,93-119,132-149,153-158
 src/util/queue.ts                                                                      |    0.00 |   21.43 | 5-16,21-30
 src/util/timeout.ts                                                                    |    0.00 |    0.00 | 1-12
 src/util/token.ts                                                                      |   50.00 |   40.00 | 1-4
 src/util/wide-events.ts                                                                |    0.00 |   11.43 | 55,59-60,64-82,86-87,91-114,118,122-135,139-150,154-158,162-171,175-208
 src/util/wildcard.ts                                                                   |   20.00 |   12.28 | 5-25,29-37,41-51,55-63
 src/worktree/index.ts                                                                  |    8.33 |   39.84 | 164,168-173,177,181-184,188-189,193,197-211,215-218,222-248,252-297,301-421
 test/preload.ts                                                                        |   63.16 |   80.70 | 49-53,57-65,70-78,82-85,89-90,93-94,139
 ../../src/agent/personas.ts                                                            |    0.00 |   98.86 | 423,428
 ../../src/awareness/config-injector.ts                                                 |    0.00 |    4.35 | 34-93,100-132,136-152
 ../../src/awareness/index.ts                                                           |    0.00 |   11.19 | 51-101,109-138,145-190
 ../../src/awareness/knowledge-loader.ts                                                |    0.00 |    5.56 | 21-43,50-82,86-97
 ../../src/awareness/mcp-catalog.ts                                                     |    0.00 |    2.54 | 34-71,79-124,128-137,144-164
 ../../src/awareness/tool-catalog.ts                                                    |    0.00 |   20.37 | 92-144,151-222,226-239,243-245,249-259,263-281,285-295,299-330
 ../../src/config/embedding-profiles.ts                                                 |    0.00 |   81.82 | 32-35
 ../../src/config/runtime.ts                                                            |    0.00 |   13.48 | 103-120,124-163,167-176,180-190,194-211,215,219,223-242,246,250
 ../../src/mcp/servers/index.ts                                                         |   33.33 |   76.74 | 72,86-94
 ../../src/memory/stats.ts                                                              |    0.00 |   33.33 | 91-105,112-115,122-132,139-142,149-158,165-175,182-194,202-213
 ../../src/paths.ts                                                                     |   13.04 |   50.59 | 20,30,34,38,42,46,55,59,67-85,92-95,99,108,112,121,129,133,142,146,159,163
----------------------------------------------------------------------------------------|---------|---------|-------------------

 0 pass
 1 fail
 1 expect() calls
Ran 1 tests across 1 files. [1.96s]
