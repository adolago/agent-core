---
import Default from '@astrojs/starlight/components/Head.astro'
import config from '../../config.mjs'

const base = import.meta.env.BASE_URL.slice(1)

const slug = Astro.url.pathname.replace(/^\//, "").replace(/\/$/, "");
const {
  entry: {
    data: { title },
  },
} = Astro.locals.starlightRoute;

const ogImage = config.url ? `${config.url}/social-share.png` : "/social-share.png";
---

{ slug === "" && (
<title>{title} | AI coding agent built for the terminal</title>
)}

<Default {...Astro.props}><slot /></Default>

{ (!slug.startsWith(`${base}/s`)) && (
  <meta property="og:image" content={ogImage} />
  <meta property="twitter:image" content={ogImage} />
)}
